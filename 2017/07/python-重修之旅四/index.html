<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.62.2 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="vici">
<meta name="keywords" content=", vici, blog, heyuhua.com, ä½•è‚²å, v1c77">
<meta name="description" content="
æˆ‘æœ‰ä¸€ä¸‡ä¸ªç†ç”±ä¸ç”¨vim&amp;emacs
">


<meta property="og:description" content="
æˆ‘æœ‰ä¸€ä¸‡ä¸ªç†ç”±ä¸ç”¨vim&amp;emacs
">
<meta property="og:type" content="article">
<meta property="og:title" content="python é‡ä¿®ä¹‹æ—…ï¼ˆå››ï¼‰">
<meta name="twitter:title" content="python é‡ä¿®ä¹‹æ—…ï¼ˆå››ï¼‰">
<meta property="og:url" content="http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
<meta property="twitter:url" content="http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
<meta property="og:site_name" content="vici&#39;blog">
<meta property="og:description" content="
æˆ‘æœ‰ä¸€ä¸‡ä¸ªç†ç”±ä¸ç”¨vim&amp;emacs
">
<meta name="twitter:description" content="
æˆ‘æœ‰ä¸€ä¸‡ä¸ªç†ç”±ä¸ç”¨vim&amp;emacs
">
<meta property="og:locale" content="zh-cn">

  
    <meta property="article:published_time" content="2017-07-21T16:28:18">
  
  
    <meta property="article:modified_time" content="2017-07-21T16:28:18">
  
  
  
    
      <meta property="article:section" content="develop">
    
  
  
    
      <meta property="article:tag" content="python">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@bookerHe">


  <meta name="twitter:creator" content="@bookerHe">










  <meta property="og:image" content="https://www.gravatar.com/avatar/85d1ea47d48692ca0ade206fa656bd14?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/85d1ea47d48692ca0ade206fa656bd14?s=640">


    <title>python é‡ä¿®ä¹‹æ—…ï¼ˆå››ï¼‰</title>

    <link rel="icon" href="//qiniu.heyuhua.com/blog_favicon.ico">
    

    

    <link rel="canonical" href="http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="http://blog.heyuhua.com/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-88015219-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="http://blog.heyuhua.com/">vici&#39;blog</a>
  </div>
  
    
      <a class="header-right-icon st-search-show-outputs"
         href="http://blog.heyuhua.com/#search">
    
    
      <i class="fa fa-lg fa-search"></i>
    
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="http://blog.heyuhua.com/#about">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/85d1ea47d48692ca0ade206fa656bd14?s=110" alt="ä½œè€…çš„å›¾ç‰‡" />
        </a>
        <h4 class="sidebar-profile-name">vici</h4>
        
          <h5 class="sidebar-profile-bio">æåº¦é€‰æ‹©å›°éš¾. <strong>æ‡’ç™Œæ™šæœŸ</strong></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://blog.heyuhua.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">é¦–é¡µ</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://blog.heyuhua.com/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">åˆ†ç±»</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://blog.heyuhua.com/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">æ ‡ç­¾</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://blog.heyuhua.com/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">å½’æ¡£</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://blog.heyuhua.com/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">å…³äº</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/v1c77" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/6382035/vi-ci" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://blog.heyuhua.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      python é‡ä¿®ä¹‹æ—…ï¼ˆå››ï¼‰
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2017-07-21T16:28:18Z">
        
  ä¸ƒæœˆ 21, 2017

      </time>
    
    
  
  
    <span>å‘å¸ƒåœ¨</span>
    
      <a class="category-link" href="http://blog.heyuhua.com/categories/develop">develop</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <blockquote>
<p>æˆ‘æœ‰ä¸€ä¸‡ä¸ªç†ç”±ä¸ç”¨vim&amp;emacs</p>
</blockquote>
<!-- raw HTML omitted -->
<h2 id="ä¸€-weakref----å¼±å¼•ç”¨">ä¸€. weakref   â€” å¼±å¼•ç”¨</h2>
<p>weakref æ¨¡å— è®©æˆ‘ä»¬å¯ä»¥åœ¨codingæ—¶ ä¸ºå¯¹è±¡æ·»åŠ å¼±å¼•ç”¨</p>
<p><em>referent</em>ï¼š ä¸€ä¸ªè¢«å¼±å¼•ç”¨çš„å¯¹è±¡</p>
<p>ç›¸å¯¹ä¸€ä¸ªhard reference(å¼ºå¼•ç”¨ï¼‰æ¥è¯´ ï¼Œå¯¹è±¡çš„å¼±å¼•ç”¨æ— æ³•è®©å¯¹è±¡ä¿æŒæ´»åŠ¨æ€ï¼šå½“å¯¹è±¡çš„å‰©ä½™å¼•ç”¨å…¨éƒ¨å¼•ç”¨ä¸ºå¼±å¼•ç”¨æ—¶ï¼Œgcå¯ä»¥é”€æ¯è¯¥å¼±å¼•ç”¨å¯¹è±¡å¹¶é‡Šæ”¾å†…å­˜ç©ºé—´ã€‚å¦ä¸€ä¸ªç‰¹æ€§æ˜¯ï¼Œåœ¨è¯¥å¯¹è±¡è¢«å®Œå…¨é”€æ¯å‰ï¼Œä½ ä»ç„¶å¯ä»¥æ”¾è‚†çš„è°ƒç”¨å®ƒã€‚ï¼ˆå½“ç„¶ä½ ä¸ä¼šçŸ¥é“å®ƒè¿”å›çš„åˆ°åº•æ˜¯è¯¥å¯¹è±¡è¿˜æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ã€‚ã€‚ï¼‰</p>
<p>å¼±å¼•ç”¨çš„ä¸»è¦è¢«ç”¨æ¥è®¾è®¡ æ”¾ç½®å¤§å¯¹è±¡çš„æ˜ å°„è¡¨ï¼ç¼“å­˜ç©ºé—´ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<p>â€‹    ğŸŒ°</p>
<p>Ê• â€¢á´¥â€¢Ê”</p>
<p>å¦‚æœæœ‰å¾ˆå¤šåºå¤§çš„äºŒè¿›åˆ¶å›¾å½¢å¯¹è±¡ï¼Œè€Œä½ å¸Œæœ›å°†æ¯ä¸ªå›¾åƒä¸ä¸€ä¸ªåå­—åšå…³è”ã€‚å¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„dictå­—å…¸æ¥æ˜ å°„name : imageï¼Œ æˆ–è€… image : name, è¿™äº›å›¾å½¢å¯¹è±¡å°†ä¼šä¸€ç›´è¢«ä¿æŒåœ¨å†…å­˜ä¸­ã€‚äºæ˜¯ä¹ <code>WeakKeyDictionary</code> å’Œ <code>WeakValueDictionary</code> ç±»å‹åº”è¿è€Œç”Ÿã€‚ä»–ä»¬åˆ†åˆ«æ”¯æŒ å¯¹äº dict ä¸­ keyå€¼å’Œvalueçš„weakrefã€‚ï¼ˆè®© image åœ¨ä¸€ä¸ªWeakKeyDictionary å­—å…¸ä¸­å……å½“key| è®© image åœ¨ WeakValueDictionaryå­—å…¸ä¸­å……å½“valueï¼‰</p>
<p>åœ¨ python 3.4 ä¸­ weakref æ·»åŠ äº†ä¸€ä¸ªæ³¨å†Œæ¸…ç†å‡½æ•°çš„å›è°ƒå…¥å£ <code>finalize</code>(def finalize(fund, *arg, **kargs)) . è¿™ä¸ªå›è°ƒä¼šåœ¨å¼±å¼•ç”¨å¯¹è±¡è¢«gcæ—¶è°ƒç”¨ã€‚ ç±»ä¼¼äº__del__ magic æ–¹æ³•ï¼Œè¯¥å›è°ƒçš„å¼‚å¸¸å¯ä»¥åœ¨æ ‡å‡†è¾“å‡ºä¸­æ˜¾ç¤ºï¼Œä½†æ˜¯ä¸èƒ½è¢«ä¼ æ’­ã€‚</p>
<h2 id="äºŒ-unittestmock--è™šå‡å¯¹è±¡">äºŒ. unittest.mock â€” è™šå‡å¯¹è±¡</h2>
<p><code>unittest.mock</code> å¤§å¤šè¢«åº”ç”¨åœ¨pythonçš„æµ‹è¯•ä¸­ã€‚ä½ å¯ä»¥å°†ç¨‹åºä¸­çš„æŸäº›éƒ¨åˆ†ç”¨mockå¯¹è±¡è¿›è¡Œæ›¿æ¢ï¼Œå¹¶æ–­è¨€ï¼å®šåˆ¶å…¶è¡¨ç°ã€‚</p>
<p>Python3.5å†…ç½®äº†mockæ¨¡å—ï¼ˆunites.mock), å…¶å¸¸ç”¨ æ–¹å¼ä¸º æŒ‡å®šè¿”å›å€¼ï¼ˆreaturn_valueï¼‰, æŒ‡å®šhookè¿”å›å‡½æ•° <code>side_effect</code>, å’Œ ä¸Šä¸‹æ–‡æ§åˆ¶æ–¹æ³• <code>mock.patch</code>ã€‚</p>
<p>åœ¨å·¥ä½œé¡¹ç›®ä¸­ï¼ŒåŒäº‹ä»¬é‡‡ç”¨äº† pytestæ­å»ºé›†æˆæµ‹è¯•ç¯å¢ƒï¼Œå…¶ä¸­çš„<code>monkeypatch</code>å·¥ä½œåŸç†ä¸mockç›¸ä¼¼ã€‚ä½†monkeypatchæ›´å±€é™äºå¯¹æŒ‡å®šæ¨¡å—æˆ–å¯¹è±¡è¿›è¡Œpatchï¼Œmockçš„ä¸°å¯Œæ¥å£è¿˜å¯ä»¥åº”ç”¨åœ¨é¡¹ç›®çš„profileåŠå…¶ä»–æ›´å¤šåº”ç”¨åœºæ™¯ä¸­ã€‚</p>
<h2 id="ä¸‰-collections-é«˜çº§å®¹å™¨æ•°æ®ç±»å‹">ä¸‰. collections é«˜çº§å®¹å™¨æ•°æ®ç±»å‹</h2>
<p>python2.7æ—¶æœŸçš„ collections åŒ…æ‹¬  <code>nametuple</code>, <code>deque</code>, <code>ChainMap</code> , <code>Counter</code>,<code>OrderDict</code>,<code>defaultdict</code>, åœ¨ python3ä¸­æ·»åŠ äº†<code>UserDict</code>, <code>UserList</code>,<code> UserString</code>ä¸‰ä¸ªç±»å‹ ã€‚</p>
<h3 id="1-chainmapé“¾è¡¨æ˜ å°„">1. ChainMapï¼ˆé“¾è¡¨æ˜ å°„ï¼‰</h3>
<p>ChainMapæ€»ä¼šè®©äººæƒ³åˆ°æ•°æ®ç»“æ„ã€‚ç„¶åæƒ³èµ·å¤§ä¸€å†™cé“¾è¡¨çš„ç¾å¥½æ—¶å…‰ã€‚å½“ç„¶ä¹Ÿä¼šæƒ³èµ·iteratortools çš„ chainã€‚</p>
<p>ChainMap å¯ä»¥å¿«é€Ÿçš„å¯¹å¤šä¸ªä¼ å…¥çš„dict æˆ–map è¿›è¡Œ é“¾æ¥linkï¼Œè¿”å›ä¸€ä¸ªå¯ä»¥å½“ä½œå•ä¸€å•å…ƒçš„å¯¹è±¡ã€‚</p>
<p>å½“æ²¡æœ‰æ˜ å°„è¢«ä¼ å…¥æ—¶ï¼ŒChainMapä¼šé»˜è®¤è¿”å›ç©ºdictã€‚</p>
<p>æ‰€æœ‰ä¼ å…¥çš„æ˜ å°„éƒ½ä¼šè¢«å‚¨å­˜åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ChainMapçš„<code>maps</code>  å±æ€§è¿›è¡ŒæŸ¥çœ‹å’Œç¼–è¾‘ã€‚å¦‚æœè¯¥åˆ—è¡¨ä¸­çš„å…ƒç´ è¢«æ›´æ”¹ï¼Œ chainmapç”±äºå¯¹è¯¥å±æ€§çš„ä¾èµ–ï¼Œå…¶å±•ç¤ºå†…å®¹ä¹Ÿä¼šç›¸åº”æ”¹å˜ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> Collection <span style="color:#f92672">import</span> ChainMap
b <span style="color:#f92672">=</span> ChainMap(locals(), globals())
b<span style="color:#f92672">.</span>new_child() <span style="color:#f92672">==</span> ChainMap({}, <span style="color:#f92672">*</span>b<span style="color:#f92672">.</span>maps)  <span style="color:#75715e"># True</span>
</code></pre></div><p>â€‹</p>
<h3 id="2-counterè®¡æ•°å™¨">2. Counterï¼ˆè®¡æ•°å™¨ï¼‰</h3>
<p>æœ‰æ—¶å€™ä½ ä¼šè§‰å¾—æ‰¾å·¥ä½œçš„æ—¶å€™é¢è¯•å®˜é—®çš„é—®é¢˜éƒ½ç‰¹åˆ«ç®€å•ï¼Œæ¯”å¦‚è¯´é—®åˆ°æ–‡ä»¶çš„è¯é¢‘ç»Ÿè®¡ï¼Œå¯èƒ½åªä¼šæƒ³åˆ°ç”¨dictæˆ–è€…collections.defaultdict æ¥ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å­—å…¸ã€‚</p>
<p>The pythonic way should beï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> re
<span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> Counter
<span style="color:#75715e"># å“ˆå§†è±ç‰¹æˆå‰§çš„è¯é¢‘</span>
words <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w+</span><span style="color:#e6db74">&#39;</span>, open(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">hamlet.txt</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">.</span>read()<span style="color:#f92672">.</span>lower())
<span style="color:#66d9ef">assert</span> Counter(words)<span style="color:#f92672">.</span>most_common(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">==</span> \
[(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">the</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">1143</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">and</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">966</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">to</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">762</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">of</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">669</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">i</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">631</span>),
 (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">you</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">554</span>),  (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">a</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">546</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">my</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">514</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">hamlet</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">471</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">in</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">451</span>)]
</code></pre></div><p>Counterçš„dictæ¥å£è®¾è®¡åœ¨è¯·æ±‚è®¿é—®ä¸å­˜åœ¨keyå¯¹åº”valueæ—¶å¹¶ä¸ä¼šæŠ›å‡ºKeyErrorå¼‚å¸¸ï¼Œè€Œæ˜¯ä¼šè¿”å›<code>0</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">counts <span style="color:#f92672">=</span> Counter([<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">a</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">a</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;</span>])
<span style="color:#66d9ef">assert</span> counts[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">c</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># True</span>
</code></pre></div><p>ä¸‰ä¸ªå®ç”¨æ–¹æ³• python3.1+ã€‚</p>
<p><code>most_common(n)</code> è¿”å›é¢‘åº¦æœ€é«˜çš„å‰nä¸ªè®¡æ•°å¯¹è±¡ï¼ŒåŠé¢‘æ•°ã€‚</p>
<p><code>elements()</code>ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¦‚æœå°†è¿­ä»£å™¨è½¬åŒ–æˆlistï¼Œ æ¯ä¸ªcounterè®°å½•çš„å…ƒç´ éƒ½ä¼šåœ¨listä¸­å‡ºç°å…¶å¯¹åº”çš„é¢‘æ•°æ¬¡æ•°ï¼Œè€Œä¸”æ— åºã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">c <span style="color:#f92672">=</span> Counter(a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</code></pre></div><p><code>c</code>.elements() å¯èƒ½æ˜¯ abbï¼Œ ä¹Ÿå¯èƒ½æ˜¯ bbaï¼Œ è¿˜å¯èƒ½æ˜¯ babã€‚</p>
<p><code>subtract()</code>  æ–¹æ³•æ¥æ”¶å¯è¿­ä»£å¯¹è±¡æˆ–æ˜ å°„ï¼Œåœ¨åŸæœ‰counterå¯¹è±¡ä¸Šè¿›è¡Œç›¸åº”çš„å‡æ³•æ“ä½œã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">c <span style="color:#f92672">=</span> Counter(a<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, d<span style="color:#f92672">=</span><span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>)
d <span style="color:#f92672">=</span> Counter(a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, c<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, d<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
c<span style="color:#f92672">.</span>subtract(d)
<span style="color:#75715e"># c update to Counter({&#39;a&#39;: 3, &#39;b&#39;: 0, &#39;c&#39;: -3, &#39;d&#39;: -6})</span>
</code></pre></div><p>Counter å®ç°äº†å¤§éƒ¨åˆ†çš„dictæ¥å£ï¼Œexceptï¼š</p>
<ul>
<li>
<p><code>fromkeys()</code>  å¹¶æ²¡æœ‰è¢«å®ç°</p>
<ul>
<li><code>update()</code>å¯¹ä¼ å…¥çš„å¯è¿­ä»£å¯¹è±¡è¿›è¡Œè®¡æ•°ï¼Œå°†ç»“æœåŠ å…¥åˆ°åŸå¯¹è±¡ã€‚</li>
</ul>
<p>â€‹</p>
</li>
</ul>
<p>åœ¨python3.3+ ä¸­ï¼Œ Counter è¿˜é‡è½½äº†ä½äº¦æˆ–åŠåŠ å‡è¿ç®—ç¬¦å·ã€‚ï¼ˆä¸å¿å¿ƒç»§ç»­æŠ„æ–‡æ¡£äº†ï¼‰è®°ä½ï¼š <code>-</code>è·Ÿ<code>subtract()</code>ä¸ä¸€æ ·ï¼Œ  <code>&amp;</code>å–å·¦å³æœ€å°ï¼Œ  <code>|</code>å–å·¦å³æœ€å¤§ã€‚ å•ä¸€<code>+</code> ,<code>-</code>å·èµ·è®¡æ•°ç­›é€‰ä½œç”¨ã€‚</p>
<h3 id="3-dequeåŒå‘é˜Ÿåˆ—">3. dequeï¼ˆåŒå‘é˜Ÿåˆ—ï¼‰</h3>
<p>è¿™ç©æ„æŠ«ç€dequeçš„ç¾Šçš®å¹²ç€listçš„æ´»ã€‚</p>
<p>ç”¨æ³•ï¼šdeque([iterable[, maxlen]])</p>
<p>dequeçš„ç‰¹æ€§æ˜¯å›´ç»•maxlenè¿™ä¸€å‚æ•°çš„ï¼Œæ‰€ä»¥ä¸å®šä¹‰maxlençš„dequeè¿˜ä¸å¦‚listã€‚ã€‚ã€‚å› ä¸ºlistä¸ºå˜é•¿liståšäº†å†…å­˜ä¼˜åŒ–ï¼Œè€Œä¸”listä¸‹æ ‡è®¿é—®æ›´å¿«ã€‚</p>
<p>è®¨è®ºä¸€ä¸‹åœ¨maxlenå®šä¹‰äº†ä¹‹åçš„æƒ…å†µã€‚å½“dequeæ»¡ï¼Œå‘ä»»æ„ä¸€ç«¯æ·»åŠ æ•°æ®ï¼ˆ<code>append</code>,<code>appendleft</code>ï¼‰ éƒ½ä¼šå¯¼è‡´ç›¸åæ–¹å‘çš„ä¸€ç«¯æ•°æ®è¢«popï¼Œè¿™ä¸€ç‰¹æ€§å¯ä»¥è¢«ç”¨åœ¨ç±»ä¼¼å®æ—¶äº¤æ˜“ç›‘æ§ï¼Œunix tailåŸå‹å®ç°ç­‰ç­‰</p>
<p>å†…ç½®æ–¹æ³•ï¼š<code>append()</code>å³ç«¯æ·»åŠ ï¼Œ<code>appendleft()</code>å·¦ç«¯æ·»åŠ ï¼Œ <code>clear()</code>æ¸…ç©ºé˜Ÿåˆ—ï¼Œ<code>copy()</code>æµ…æ‹·è´ï¼ˆnew in 3.5ï¼‰&hellip;</p>
<p><code>count(x)</code> :è®°å½•ç­‰äº x çš„å…ƒç´ ä¸ªæ•°ã€‚</p>
<p><code>extend(iter)</code> å‘é˜Ÿåˆ—å³ä¾§æ‰¹é‡æ’å…¥ã€‚å·¦ä¾§æ’å…¥åˆ™æœ‰<code>extendleft()</code></p>
<p><code>index(x)</code>è·å–å…ƒç´ åæ ‡ï¼Œè¿˜å¯ä»¥æ·»åŠ startï¼Œstopå‚æ•°é€‰å®šæŸ¥æ‰¾èŒƒå›´ã€‚</p>
<p><code>insert(i,x)</code>å°†å…ƒç´ xæ’å…¥åˆ°é˜Ÿåˆ—çš„iä½ç½®ã€‚</p>
<p><code>pop()</code>,<code>popleft()</code> åˆ†åˆ«ä»é˜Ÿåˆ—å³ä¾§ï¼Œ å·¦ä¾§å»é™¤å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ç©ºæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p><code>remove(x)</code>åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å…ƒç´ x</p>
<p><code>reverse()</code>åè½¬</p>
<p><code>rotate()</code> è½®è½¬</p>
<p>ä¸€äº›å®˜æ–¹ä½¿ç”¨å®ä¾‹ï¼š</p>
<p>Linux tail çš„æœ€ç®€å®ç°ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">log_file <span style="color:#f92672">=</span> open(path_to_file)
tail <span style="color:#f92672">=</span> deque(log_file, <span style="color:#ae81ff">10</span>)  <span style="color:#75715e"># å¾—åˆ°äº†æ–‡ä»¶çš„æœ€ååè¡Œã€‚</span>
</code></pre></div><p>æ±‚æ»‘åŠ¨å¹³å‡ï¼ç§»åŠ¨å¹³å‡ï¼ˆæ‹“å±•åˆ°æ±‚å·ç§¯ä»€ä¹ˆçš„ã€‚ã€‚ï¼‰</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">moving_average</span>(iterable, n<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>):
    <span style="color:#75715e"># moving_average([40, 30, 50, 46, 39, 44]) --&gt; 40.0 42.0 45.0 43.0</span>
    <span style="color:#75715e"># http://en.wikipedia.org/wiki/Moving_average</span>
    it <span style="color:#f92672">=</span> iter(iterable) <span style="color:#75715e"># è½¬æ¢ä¸ºè¿­ä»£ç±»å‹</span>
    d <span style="color:#f92672">=</span> deque(itertools<span style="color:#f92672">.</span>islice(it, n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))  <span style="color:#75715e"># åˆå§‹åŒ– deque([40, 30])</span>
    d<span style="color:#f92672">.</span>appendleft(<span style="color:#ae81ff">0</span>) <span style="color:#75715e"># å¡«å……ç©ºæ•°æ®ã€‚ deque([0, 40, 30])</span>
    s <span style="color:#f92672">=</span> sum(d)
    <span style="color:#66d9ef">for</span> elem <span style="color:#f92672">in</span> it: <span style="color:#75715e"># it = iter([50, 46, 39, 44])</span>
        s <span style="color:#f92672">+</span><span style="color:#f92672">=</span> elem <span style="color:#f92672">-</span> d<span style="color:#f92672">.</span>popleft()
        d<span style="color:#f92672">.</span>append(elem)
        <span style="color:#66d9ef">yield</span> s <span style="color:#f92672">/</span> float(n)
</code></pre></div><h3 id="4-defaultdict-å­—å…¸å·¥å‚">4. defaultdict ï¼ˆå­—å…¸å·¥å‚ï¼‰</h3>
<p>ä¸€ä¸ªå†…å»ºæ•°æ®ç±»å‹ dict çš„å­ç±»ï¼Œ åœ¨dictçš„åŸºç¡€ä¸Šé‡æ„äº†ä¸€ä¸ªå†…å»ºæ–¹æ³•ï¼Œ å¹¶æ·»åŠ äº†ä¸€ä¸ªå¯ç¼–è¾‘çš„å®ä¾‹å˜é‡ã€‚</p>
<p>some cookies</p>
<p>åˆ©ç”¨ defaultdict of list å°†ä¸€ä¸ªkey-value åºåˆ—åˆ†ç»„ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">sol <span style="color:#f92672">=</span> [(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ç”·</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">vici</span><span style="color:#e6db74">&#39;</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">å¥³</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Rancho</span><span style="color:#e6db74">&#39;</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ä¸­æ€§</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Littlekey</span><span style="color:#e6db74">&#39;</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ç”·</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Guido</span><span style="color:#e6db74">&#39;</span>), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">å¥³</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">æŸå¾æŸxuan</span><span style="color:#e6db74">&#39;</span>)]
d <span style="color:#f92672">=</span> defaultdict(list)
<span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> sol:
  d[k]<span style="color:#f92672">.</span>append(v)
<span style="color:#66d9ef">assert</span> sorted(d<span style="color:#f92672">.</span>items()) <span style="color:#f92672">==</span> [(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ä¸­æ€§</span><span style="color:#e6db74">&#39;</span>, [<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Littlekey</span><span style="color:#e6db74">&#39;</span>]), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">å¥³</span><span style="color:#e6db74">&#39;</span>, [<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Rancho</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">æŸå¾æŸxuan</span><span style="color:#e6db74">&#39;</span>]), (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ç”·</span><span style="color:#e6db74">&#39;</span>, [<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">vici</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Guido</span><span style="color:#e6db74">&#39;</span>])]
</code></pre></div><p>å½“dictä¸­çš„æŸä¸ªé”®ä¸å­˜åœ¨ä¸”è¢«è°ƒç”¨æ—¶ï¼Œdefaultdictä¼šä½¿ç”¨é»˜è®¤å·¥å‚è¿›è¡Œåˆå§‹åŒ–ï¼Œ æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­åœ¨è¿›è¡Œéå†solä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ d[k] æ“ä½œä¼šç”Ÿæˆä¸€ä¸ªç©ºlistä¸ç›¸åº”çš„kå½¢æˆæ˜ å°„ã€‚</p>
<p>æ‰¿æ¥ä¸€ä¸‹Counterçš„éƒ¨åˆ†ï¼Œæœ¬å®å®ä¹‹å‰åšæ–‡ä»¶å­—æ•°ç»Ÿè®¡ç”¨çš„å°±æ˜¯defaultdictã€‚ã€‚ã€‚</p>
<h3 id="5-namedtupleå‘½åå…ƒç»„å·¥å‚">5. namedtupleï¼ˆå‘½åå…ƒç»„å·¥å‚ï¼‰</h3>
<p>å¿«é€Ÿå®ç°ç®€å•ç»“æ„ä½“çš„ä¸äºŒä¹‹é€‰ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">People <span style="color:#f92672">=</span> namedtuple(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">People</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">name age birth school</span><span style="color:#e6db74">&#39;</span>)
p <span style="color:#f92672">=</span> People(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">vici</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">17</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">0701</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">WHUT</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#66d9ef">assert</span> p <span style="color:#f92672">==</span> People(name<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">vici</span><span style="color:#e6db74">&#39;</span>, age<span style="color:#f92672">=</span><span style="color:#ae81ff">17</span>, birth<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">0701</span><span style="color:#e6db74">&#39;</span>, school<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">WHUT</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#66d9ef">assert</span> p<span style="color:#f92672">.</span>school <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">WHUT</span><span style="color:#e6db74">&#39;</span>
<span style="color:#66d9ef">assert</span> p<span style="color:#f92672">.</span>age <span style="color:#f92672">==</span> <span style="color:#ae81ff">17</span>
name, age, <span style="color:#f92672">*</span>_ <span style="color:#f92672">=</span> p
<span style="color:#66d9ef">assert</span> name
</code></pre></div><p>å½“ç„¶æ˜¯ç”¨å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²æ¥åŒºåˆ†named_field åªæ˜¯ä¸ºäº†å±•ç¤º pythonçš„å¼ºå¤§è¯­æ³•ç³–ï¼Œæ–‡æ¡£æ¨èä½¿ç”¨<code>[name, age, birth, school]</code>çš„ä¼ å‚æ–¹å¼åˆ›å»ºå·¥å‚ã€‚</p>
<p>nametupleå¾ˆé€‚åˆåšä¸€äº›ç»“æ„åŒ–æ•°æ®ï¼Œç±»ä¼¼sqlæŸ¥è¯¢ï¼Œcsvï¼Œsqlite3ç­‰ç­‰ã€‚</p>
<p>ç›´æ¥æŠ„è¢­æ–‡æ¡£å®ä¾‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">EmployeeRecord <span style="color:#f92672">=</span> namedtuple(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">EmployeeRecord</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">name, age, title, department, paygrade</span><span style="color:#e6db74">&#39;</span>)

<span style="color:#f92672">import</span> csv
<span style="color:#66d9ef">for</span> emp <span style="color:#f92672">in</span> map(EmployeeRecord<span style="color:#f92672">.</span>_make, csv<span style="color:#f92672">.</span>reader(open(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">employees.csv</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">rb</span><span style="color:#e6db74">&#34;</span>))):
    <span style="color:#66d9ef">print</span>(emp<span style="color:#f92672">.</span>name, emp<span style="color:#f92672">.</span>title)

<span style="color:#f92672">import</span> sqlite3
conn <span style="color:#f92672">=</span> sqlite3<span style="color:#f92672">.</span>connect(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">/companydata</span><span style="color:#e6db74">&#39;</span>)
cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SELECT name, age, title, department, paygrade FROM employees</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#66d9ef">for</span> emp <span style="color:#f92672">in</span> map(EmployeeRecord<span style="color:#f92672">.</span>_make, cursor<span style="color:#f92672">.</span>fetchall()):
    <span style="color:#66d9ef">print</span>(emp<span style="color:#f92672">.</span>name, emp<span style="color:#f92672">.</span>title)

</code></pre></div><p>è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªclassmethod <code>_make(iterable)</code>ï¼šä»ä¸€ä¸ª iterableå¯¹è±¡æ–°å»ºå®ä¾‹ï¼Œ</p>
<p>å…¶ä»–å®ä¾‹æ–¹æ³•ï¼›</p>
<p><code>_asdist()</code> è¿”å›ä¸€ä¸ª orderedDictï¼Œå­˜æ”¾å­—æ®µååŠå…¶å¯¹åº”value.</p>
<p><code>_replace()</code>ä¿®æ”¹tumpleå€¼ã€‚</p>
<p><code>_source</code>è¯¥å±æ€§è¿”å›å¯äº¤ç”±<code>exec()</code>æ‰§è¡Œçš„åŸºäºå½“å‰pythonç‰ˆæœ¬çš„pythonæºç ã€‚</p>
<p><code>_fields</code>è¿”å›åŒ…å«æ‰€æœ‰å­—æ®µåçš„tuple.å¯ç”¨ä¸å¤šä¸ªnamedtupleçš„å¿«é€Ÿåˆå¹¶ã€‚</p>
<p>ç±»ä¼¼ä»€ä¹ˆä½œä¸ºç»§æ‰¿ç±»å’Œæ·»åŠ <code>__doc__ </code>çš„å’¸é±¼æ“ä½œæ‡’å¾—å†™äº†ã€‚</p>
<h3 id="6-ordereddictæœ‰åºå­—å…¸">6. OrderedDictï¼ˆæœ‰åºå­—å…¸ï¼‰</h3>
<p>å°±æ˜¯æœ‰åºå­—å…¸å˜›ï¼Œæœ‰ä»€ä¹ˆå¥½è¯´çš„å‡¸^-^å‡¸ã€‚éš¾é“è¿™ç©æ„æ€ä¹ˆç”¨ä½ å¿ƒé‡Œè¿˜æ²¡ç‚¹bæ•°å˜›ï¼Ÿ</p>
<p>é™¤äº†æ‰€æœ‰çš„dictçš„æ–¹æ³•ï¼Œpython3.1åè¿˜æ·»åŠ äº†ä¸¤ä¸ªé¸¡è‚‹æ–¹æ³•<code>popitem()</code> &amp; <code>move_to_end(key)</code>, å‰è€…ä¼šè¿”å›å¹¶åˆ é™¤å¯¹è±¡çš„æœ€åä¸€ä¸ªé”®å€¼å¯¹ï¼Œåè€…ä¼šæŠŠkeyæŒªåˆ°å­—å…¸æœ€åã€‚</p>
<h3 id="7-userdict-userlist-userstring-é›†åˆç±»å‹åŒ…è£…å¯¹è±¡">7. UserDict, UserList, UserString é›†åˆç±»å‹åŒ…è£…å¯¹è±¡</h3>
<p>python3ä¹‹å‰è¿™äº›ç±»å‹ä½œä¸ºå•ç‹¬moduleç‹¬ç«‹å­˜åœ¨ï¼Œåœ¨python3åè¢«æ•´åˆè¿›collections moduleï¼Œå…¶ä»–çš„ä¸€äº›æŠ½è±¡Mixin classç±»ä¼¼ <code>MutableMapping</code> åˆ™è¢«è¿ç§»åˆ°äº†<code>collections.abc</code>module.</p>
<p>å¦‚æœæƒ³è¦åˆ›å»ºä¸€ä¸ªdictçš„å­ç±»ï¼Œç›´æ¥ç»§æ‰¿dictè€Œä¸è¦ç»§æ‰¿UserDictï¼Œä½ å¥½æˆ‘å¥½å¤§å®¶å¥½ã€‚</p>
<p>æˆ‘è§‰å¾—<a href="http://www.dongwm.com/archives/UserDict%E3%80%81UserString%E3%80%81UserList%E5%AD%98%E5%9C%A8%E7%9A%84%E6%84%8F%E4%B9%89/">dongweimingåšå®¢é‡Œçš„äº‹ä»¶</a>å®åœ¨æ˜¯æç«¯ã€‚è§ä»è§æ™ºï¼Œä¸–ç•Œå’Œå¹³ï½</p>
<h5 id="ä¸ç®—é¢˜å¤–çš„é¢˜å¤–è¯">ä¸ç®—é¢˜å¤–çš„é¢˜å¤–è¯ï¼š</h5>
<p>æˆ‘å¿äº†å¾ˆä¹…äº†ï¼ˆäº2017-08-09 00:27ï¼‰</p>
<p>å…¥èŒæ–°å…¬å¸åæˆ‘åˆä¸€æ¬¡é™·å…¥äº†é„™è§†é“¾ï¼šemacs  &gt; vim &gt; ide</p>
<p>å¦‚æœæœ‰è°è¿˜æ•¢ç”¨è¿™ç§é„™è§†é“¾ææˆ‘ï¼Œæˆ‘åªæƒ³æŠ½å‡ºæˆ‘40ç±³çš„é•¿åˆ€ï¼Œè®©ä½ ä¸«å…ˆè·‘39ç±³å†ç®—è´¦ã€‚</p>
<p>ç¬¬ä¸€æ¬¡ç”¨viç±»çš„ç¼–è¾‘å™¨æ˜¯é«˜ä¸­æ—¶å€™æ— èŠç»™å®¶é‡Œç”µè„‘è£…äº†ä¸ªubuntu, ä¸‡èƒ½çš„ç½‘å‹è¯´nanoä¸å¦‚vimå¥½ç”¨ï¼Œä»æ­¤å…¥äº†vimçš„å‘ï¼ˆä¸è¿‡æˆ‘æ‰¿è®¤è¿™ä¹ˆå¤šå¹´è¿‡å»äº†æˆ‘vimä¹Ÿå°±æ˜¯å…¥é—¨æ°´å¹³ï¼‰ï¼Œå½“æ—¶ä¹…è§‰å¾—è¿™ç©æ„çœŸç‰¹ä¹ˆéš¾ç”¨è€è¦åˆ‡æ¢è¯»å†™ã€‚è¿ä¸ªå…³é—­æŒ‰é’®éƒ½æ²¡æœ‰ï¼Œbulabula&hellip;</p>
<p>ä½†æ˜¯åæ¥ä¹ æƒ¯åï¼Œæˆ‘è§‰å¾—ç”¨vimå†™cè¦æ¯”windowsä¸Šçš„vc6.0å¥½ç”¨å¤šäº†ã€‚å¤§å­¦æ¥è§¦äº†visual studio 2013ï¼15ï¼ˆå†™c#)ï¼ŒJetBrains IDEA (å†™java å’Œandroid)ï¼Œå°±å‡ ä¹æ”¾å¼ƒä½¿ç”¨ç¼–è¾‘å™¨äº†ã€‚</p>
<p>æˆ‘ç°åœ¨å†™pythonã€‚</p>
<p>æˆ‘å°±ä¸ä¿¡ä½ ä»¬ç”¨vimçš„èƒ½ä¸€ä¸ªcommand+bè·³è½¬åˆ° redis.lock.Lock æ–¹æ³•çš„æºç ï¼Œ æˆ‘å°±ä¸ä¿¡ä½ èƒ½åˆ é™¤ä¸Šä¸€è¡Œçš„æ—¶å€™ä¸‹ä¸€è¡Œçš„ç¼©è¿›è¿˜èƒ½è·Ÿç€è‡ªåŠ¨ä¿®æ”¹ã€‚æˆ‘ä¸ä¿¡ä½ nå¤šä¸ªé¡¹ç›®éƒ½å¸¦virtualenvçš„æ—¶å€™è¿˜èƒ½ç»™ä½ ä¸€ä¸ªç›¸åº”ç‰ˆæœ¬çš„python consoleï¼ipython tableã€‚</p>
<p>æˆ‘å°±æ˜¯å–œæ¬¢ideå ç”¨æˆ‘cpu30%æ—¶å€™çš„æ ·å­ã€‚ç”µè„‘å¡åªèƒ½æ€ªä½ çš„ç”µè„‘å·®ã€‚</p>
<p>ç”¨vim666çš„å¤§ä½¬æœ¬å®å®å¿ƒé‡Œä½©æœçš„ï¼Œä½†æ˜¯æˆ‘å†™ä»£ç æ˜¯ä¸ºäº†è‡ªå·±çˆ½ï¼Œwho care why are you so diaoï¼Ÿpycharm proè®©æˆ‘æœ‰é£ä¸€æ ·çš„æ„Ÿè§‰ï¼ŒçŠ¹å¦‚æ¿€å…‰æªï¼Œvimæœ€å¤šç®—æ˜¯å‹¾è·µå‰‘ï¼Œåªå¯ç ç“œåˆ‡èœï¼Œè€Œæˆ‘å¯ä»¥æŠŠä½ è½°æ€è‡³æ¸£ã€‚</p>
<p>å½“ç„¶æˆ‘ä¹Ÿåœ¨pycharmé‡ŒåŠ äº†vimæ’ä»¶ï¼Œæœ‰æœ¬äº‹ä½ æ‰“æˆ‘å•Šã€‚</p>
<p>è¿™å¯èƒ½æ˜¯ä¸€ä¸ªäº’ç›¸éª‚å‚»bï¼Œç„¶åæ…¢æ…¢æŠŠè‡ªå·±å˜æˆå‚»bçš„æ•…äº‹ã€‚</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">æ ‡ç­¾</span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://blog.heyuhua.com/tags/python/">python</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://blog.heyuhua.com/2017/07/raspberry-pi3-archlinux-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/" data-tooltip="raspberry pi3 ArchLinux å®‰è£…è®°å½•">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">ä¸‹ä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://blog.heyuhua.com/2017/04/pyenv-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-tooltip="pyenv å¸¸ç”¨å‘½ä»¤">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ä¸Šä¸€ç¯‡</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 <a href="https://github.com/v1c77">v1c77</a><br><a href="http://beian.miit.gov.cn">ç²¤ICPå¤‡19031392å·</a>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://blog.heyuhua.com/2017/07/raspberry-pi3-archlinux-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/" data-tooltip="raspberry pi3 ArchLinux å®‰è£…è®°å½•">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">ä¸‹ä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://blog.heyuhua.com/2017/04/pyenv-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-tooltip="pyenv å¸¸ç”¨å‘½ä»¤">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ä¸Šä¸€ç¯‡</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://blog.heyuhua.com/2017/07/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fblog.heyuhua.com%2F2017%2F07%2Fpython-%25E9%2587%258D%25E4%25BF%25AE%25E4%25B9%258B%25E6%2597%2585%25E5%259B%259B%2F">
          <i class="fa fa-facebook-official"></i><span>åˆ†äº«åˆ° Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http%3A%2F%2Fblog.heyuhua.com%2F2017%2F07%2Fpython-%25E9%2587%258D%25E4%25BF%25AE%25E4%25B9%258B%25E6%2597%2585%25E5%259B%259B%2F">
          <i class="fa fa-twitter"></i><span>åˆ†äº«åˆ° Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http%3A%2F%2Fblog.heyuhua.com%2F2017%2F07%2Fpython-%25E9%2587%258D%25E4%25BF%25AE%25E4%25B9%258B%25E6%2597%2585%25E5%259B%259B%2F">
          <i class="fa fa-google-plus"></i><span>åˆ†äº«åˆ° Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/85d1ea47d48692ca0ade206fa656bd14?s=110" alt="ä½œè€…çš„å›¾ç‰‡" />
    
    <h4 id="about-card-name">vici</h4>
    
      <div id="about-card-bio">æåº¦é€‰æ‹©å›°éš¾. <strong>æ‡’ç™Œæ™šæœŸ</strong></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        software enginer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Shenzhen | Beijing | Shanghai
      </div>
    
  </div>
</div>

    

    
  
    <div id="cover" style="background-image:url('http://qiniu.heyuhua.com/India1.little.jpg!huge.webp');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="http://blog.heyuhua.com/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


  
    <script src="http://qiniu.heyuhua.com/highlight.pack.js"></script>
  

<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'http:\/\/blog.heyuhua.com\/2017\/07\/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B\/';
          
            this.page.identifier = '\/2017\/07\/python-%E9%87%8D%E4%BF%AE%E4%B9%8B%E6%97%85%E5%9B%9B\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'vici_blog';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    
  </body>
</html>

